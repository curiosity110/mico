{% extends 'base.html' %}
{% load i18n static %}

{% block content %}
<main class="container mx-auto px-4">
  <section class="py-12">
    <h1 class="text-2xl font-bold mb-4">{% trans 'About Us' %}</h1>
    <p class="text-gray-700">{% trans 'Our company delivers certified health products with transparent service and long-term partnerships.' %}</p>
  </section>

  <section id="certs" class="py-12">
    <div class="mb-6 flex items-end justify-between">
      <h2 class="text-xl sm:text-2xl font-bold tracking-tight text-gray-900">{% trans 'Certificates & Compliance' %}</h2>
      <div class="flex items-center gap-2">
        <div class="swiper-button-prev certs-prev"></div>
        <div class="swiper-button-next certs-next"></div>
      </div>
    </div>
    <div class="swiper" id="certs-swiper">
      <div class="swiper-wrapper" id="certs-wrapper"></div>
      <div class="swiper-pagination certs-dots mt-6"></div>
    </div>
  </section>
</main>
{% endblock %}

{% block scripts %}
<script>
  async function loadCerts() {
    const lang = document.documentElement.lang || 'en';
    try {
      const res = await fetch("{% static 'mock/certificates.json' %}");
      const certs = await res.json();
      const wrapper = document.getElementById('certs-wrapper');
      wrapper.innerHTML = certs.map(c => `
        <div class=\"swiper-slide\">
          <div class=\"rounded-2xl border border-gray-200 bg-white p-4 h-full card-hover\">
            <img src=\"${c.image_url}\" class=\"w-full h-48 object-cover rounded-lg\" alt=\"${c.name[lang] || c.name.en}\">
            <div class=\"mt-3\">
              <div class=\"text-sm font-semibold\">${c.name[lang] || c.name.en}</div>
              <p class=\"text-xs text-gray-600\">${c.description[lang] || c.description.en}</p>
            </div>
          </div>
        </div>
      `).join('');
      new Swiper('#certs-swiper', {
        slidesPerView: 1.2,
        spaceBetween: 16,
        loop: true,
        grabCursor: true,
        breakpoints: {
          640:  { slidesPerView: 2.2, spaceBetween: 20 },
          768:  { slidesPerView: 3,   spaceBetween: 24 },
          1024: { slidesPerView: 4,   spaceBetween: 24 },
        },
        navigation: { nextEl: '.certs-next', prevEl: '.certs-prev' },
        pagination: { el: '.certs-dots', clickable: true },
        keyboard: { enabled: true },
        mousewheel: { forceToAxis: true },
      });
    } catch (e) {
      console.error(e);
    }
  }
  loadCerts();
</script>
{% endblock %}
